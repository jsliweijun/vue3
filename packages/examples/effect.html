<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>effect</title>
    </head>
    <body>
        <div id="app"></div>
        <script src="../reactivity/dist/reactivity.global.js"></script>
        <script>
            // 认识 effect
            let { effect, reactive } = VueReactivity;

            // 创建相应式数据
            let state = reactive({ name: 'effect', age: 18, other: 'xxx' });

            // 副作用函数，默认执行时会调用get 操作，页面渲染会进行执行，在get操作中将对应的 effect 存起来
            effect(() => {
                app.innerHTML = `${state.name}  ----- ${state.age}`;
            });

            // 改值操作
            setTimeout(() => {
                // state.age = 19
                state.other = '1111'; // 页面没有这个变量，即使更新了，页面没有渲染，get 会记录 effect
            }, 1000);
        </script>
    </body>
</html>
